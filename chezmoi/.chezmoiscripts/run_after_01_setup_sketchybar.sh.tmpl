#!/bin/bash

. "{{ .chezmoi.sourceDir }}/../scripts/utils.sh"

print_info "\nConfiguring sketchybar\n"

# Because the sketchybar brew service changes permissions of the files, I couldn't get a solid way of applying this correctly.
# That's why I have to do it manually.
cp {{ .chezmoi.sourceDir }}/dot_config/sketchybar/sketchybarrc ~/.config/sketchybar/
cp {{ .chezmoi.sourceDir }}/dot_config/sketchybar/items/* ~/.config/sketchybar/items/
cp {{ .chezmoi.sourceDir }}/dot_config/sketchybar/settings/* ~/.config/sketchybar/settings/

# Set exec permissions for all plugins
find ~/.config/sketchybar/settings/ -type f -name "*.*" -exec chmod 775 {} \;
find ~/.config/sketchybar/items/ -type f -name "*.*" -exec chmod 775 {} \;

brew services restart sketchybar

print_success "Done!\n"
